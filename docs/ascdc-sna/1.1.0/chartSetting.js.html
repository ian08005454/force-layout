<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chartSetting.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-keywordCleaner-searchTarget.html">searchTarget</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="searchWord.html">searchWord</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="searchWord.html#.keywordCleanUp">keywordCleanUp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="searchWord.html#.keywordNot">keywordNot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="searchWord.html#.lineAppend">lineAppend</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-API.html">API</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-API.html#.GetJSON">GetJSON</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-assignColor.html">assignColor</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-chartSetting.html">chartSetting</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-colorPanelSetting.html">colorPanelSetting</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-colorPanelSetting.html#.colorPanelInit">colorPanelInit</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-dataFormater.html">dataFormater</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~appendNode">appendNode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~dataFormat">dataFormat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~getColor">getColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~getRandomColor">getRandomColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~hslToHex">hslToHex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~setSquare">setSquare</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html">graphologyLayoutSystem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html#.layoutCalculator">layoutCalculator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html#~dataTypeChange">dataTypeChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html#~positionWrite">positionWrite</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-keywordCleaner.html">keywordCleaner</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#.keywordCleanUp">keywordCleanUp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#.keywordItemAppend">keywordItemAppend</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#~keyword_item_delete">keyword_item_delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#~lineCtrl">lineCtrl</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-listGenerator.html">listGenerator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#.listGenerator">listGenerator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~lineList">lineList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~lineListChange">lineListChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~nodeList">nodeList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~nodeListChange">nodeListChange</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-MainSetting.html">MainSetting</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#.event_setOption_function">event_setOption_function</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#.keywordFliter">keywordFliter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#.lineColorChanger">lineColorChanger</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~edgeFilter">edgeFilter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~keyword_search">keyword_search</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~max_Level">max_Level</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~resetChart">resetChart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~viewDataChange">viewDataChange</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-searchFunction.html">searchFunction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#.changeMaxlevel">changeMaxlevel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#.searchKeyword">searchKeyword</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~andSearch">andSearch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~andSearchNoRoute">andSearchNoRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~data_filter">data_filter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~dataAppendOr">dataAppendOr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~floodingSearch">floodingSearch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~lineOr">lineOr</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-searchSuggest.html">searchSuggest</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchSuggest.html#.autocomplete">autocomplete</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-sliderbarSetting.html">sliderbarSetting</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#.positionCalculator">positionCalculator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#.silderInit">silderInit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#.sliderBar">sliderBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~centrality">centrality</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~filterControler">filterControler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~ngraph">ngraph</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~switchType">switchType</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">chartSetting.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module chartSetting
 * @description 圖表的設定內容
 * @author Wei-Jie Li
 * @createDate 2021-03-21
 */
import { dataFormat, allValues, allIdf } from './dataFormater.js';
import { GetJSON } from "./API";
GetJSON(url);
console.log(jdata);
/**
 * @type {object}
 * 整理後的資料
 */
export const data = dataFormat(jdata); //資料整理模組
var max_common_show_value = Math.max(...allValues);
var min_common_show_value = Math.min(...allValues);
var max_idf = Math.max(...allIdf);
var min_idf = Math.min(...allIdf);
/**
 * ECharts graph圖表設定檔
 * @see ECharts的配置項說明書 {@link https://echarts.apache.org/zh/option.html#series-graph.type }
 */
export var option = {
	title: {
        show: true,
		text: bookName, // this field will connect to the book name
		textStyle: {
			fontSize: 32,
			fontWeight: 'bolder',
            color: '#595759'
		},
		// subtextStyle: {
		// 	fontSize: 15,
		// 	fontWeight: 'bolder'
		// },
        top: "bottom",
        left: "right",
        triggerEvent: true,
	},
	tooltip: {
		show: true,
		formatter: function(element) {
			if (element.dataType == 'node') return element.name  +'(&lt;b>' + element.value + '&lt;/b>)';
			if (element.dataType == 'edge'){
				var target,source
				data.nodes.forEach(node => {
					if(node.name === element.data.target)
						target = node.value;
					else if (node.name === element.data.source)
						source = node.value
				});
				if(element.data.bilateral === 'true')
					return element.data.source +  '('+ source +')' + ' &lt;-- &lt;b>' + element.data.name + '(' + element.value + '&lt;/b>) -->   ' + element.data.target + '('+ target +')' ;
				else
					return element.data.source +  '('+ source +')' + ' -- &lt;b>' + element.data.name + '(' + element.value + '&lt;/b>) -->   ' + element.data.target + '('+ target +')' ;
			}
		}
		// showContent:false, //mouseover是否顯示
	},
	toolbox: {
		left: 'right',
		show: true,
		feature: {
			magicType: { show: true, type: [ 'force', 'chord' ] },
			saveAsImage: {
				show: true,
				title: '存成圖片',
				type: 'png'
			},
			// ! dataView still have to fix
			// dataView: {
			//     show: true,
			//     title: 'data',
			//     readOnly: false,
			//     lang: ['Detail Data Information', 'Close', 'refresh'],
			// },
			restore: {
				show: true,
				title: 'restore'
			}
		}
	},
	// legend: {
	//     type: 'scroll',
	//     data: data.category,
	//     tooltip: {
	//         show: false,
	//     },
	//     orient: 'vertical',
	//     pageButtonPosition: 'start',
	//     selectedMode: 'true',
	//     width: 100,
	//     height: 140,
	//     right: 50
	// },
	series: [
		{
			type: 'graph',
			layout: 'force',
			categories: data.category,
			nodes: data.nodes,
			// modularity: true,
			links: data.links,
			itemStyle: {
				color: 'pink' //預設node顏色
			},
			label: {
				fontFamily: 'sans-serif',
				show: true,
				fontSize: 17,
				fontWeight: 'bold',
				formatter: function(param) {
					return param.name + `(` + param.data.idf + `)`;
				},
				color: '#1212128F'
			},
			draggable: true, //單獨點的移動
			roam: true, //禁止使用者作放大縮小 只准拖動 true,'move','scale',false
			nodeScaleRatio: 0.1,
			force: {
				// friction: 0.1,
				repulsion: 300,
				// todo : fix the jquery slider
				edgeLength: [ 250, 400 ],
				// gravity : 1,
				gravity: 0.01,
				layoutAnimation: true //開始的晃動動畫
			},
			edgeSymbol: [ 'circle', 'arrow' ],
            edgeSymbolSize: [10, arrowSize],
			emphasis: {
				focus: 'adjacency',
				scale: true,
				lable: {
					show: true,
					color: "#121212",
					fontSize: 20
				}
			},
			autoCurveness: true, //auto calculate each curveness of lines
			edgeLabel: {
				fontFamily: 'sans-serif',
				overflow: 'break',
				verticalAlign: 'bottom',
				show: true,
				fontSize: 18,
				fontWeight: 'bold',
				formatter: function(param) {
					// param.name = `${param.data.target}>${param.data.source}`;
					return param.data.name + `(` + param.data.value + `)`;
				},
				position: 'middle',
				align: 'center',
				ellipsis: '...',
			},
			lineStyle: {
				opacity: 1
			},
			zoom: 1,
		}
	]
};

/**
 * 調整項的初始化設定值
 * @type {object}
 */
export var jquery_slider_setting = [
	{
		object: 'relation_strength',
		min: 0,
		max: 100,
		step: 1,
		value: 0,
		disable: false,
		range: 'min'
	},
	{
		object: 'group_label_distance',
		min: 0,
		max: 100,
		step: 1,
		value: 0,
		disable: false,
		range: 'min'
	},
	{
		object: 'node_distance',
		min: 1,
		max: 100,
		step: 1,
		value: option.series[0].force.repulsion / 100,
		disable: false,
		range: 'min'
	},
	{
		object: 'relation_link_width',
		min: 0.5,
		max: 5,
		step: 0.5,
		value: 1,
		disable: false,
		range: 'min'
	},
	{
		object: 'main_screen_room',
		min: 0.1, //option.series[0].zoom,
		max: 2,
		step: 0.1,
		value: option.series[0].zoom,
		disable: false,
		range: 'min'
	},
	{
		object: 'relation_font_size',
		min: 5,
		max: 100,
		step: 1,
		value: option.series[0].edgeLabel.fontSize,
		disable: false,
		range: 'min'
	},
	{
		object: 'subject_font_size',
		min: 5,
		max: 100,
		step: 1,
		value: option.series[0].label.fontSize,
		disable: false,
		range: 'min'
	},
	{
		object: 'node_size',
		min: 0.2,
		max: 5,
		step: 0.2,
		value: 1,
		disable: false,
		range: 'min'
	},
	{
		object: 'common_show_value',
		min: min_common_show_value - 1,
		max: max_common_show_value,
		step: 1,
		value: min_common_show_value,
		disable: false,
		range: 'min'
	},
	{
		object: 'word_strength', //idf詞頻強度
		min: min_idf - 1,
		max: max_idf,
		step: 1,
		value: min_idf,
		disable: false,
		range: 'min'
	},
	{
		object: 'relation_distance',
		min: 50,
		max: 1000,
		step: 25,
		values: [ option.series[0].force.edgeLength[0] / 5, option.series[0].force.edgeLength[1] / 5 ],
		disable: false,
		range: true
	}
	// {
	// 	object: 'arrowSize', //箭頭大小
	// 	min: 1,
	// 	max: 30,
	// 	step: 1,
	// 	value: option.series[0].edgeSymbolSize,
	// 	disable: true,
	// 	range: 'min'
	// }
];
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Jul 15 2021 21:44:02 GMT+0800 (台北標準時間) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
