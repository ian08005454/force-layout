<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>listGenerator.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-keywordCleaner-searchTarget.html">searchTarget</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="searchWord.html">searchWord</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="searchWord.html#.keywordCleanUp">keywordCleanUp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="searchWord.html#.keywordNot">keywordNot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="searchWord.html#.lineAppend">lineAppend</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-API.html">API</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-API.html#.GetJSON">GetJSON</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-assignColor.html">assignColor</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-chartSetting.html">chartSetting</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-colorPanelSetting.html">colorPanelSetting</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-colorPanelSetting.html#.colorPanelInit">colorPanelInit</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-dataFormater.html">dataFormater</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~appendNode">appendNode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~dataFormat">dataFormat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~getRandomColor">getRandomColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~hslToHex">hslToHex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-dataFormater.html#~setSquare">setSquare</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html">graphologyLayoutSystem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html#.layoutCalculator">layoutCalculator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html#~dataTypeChange">dataTypeChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-graphologyLayoutSystem.html#~positionWrite">positionWrite</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-keywordCleaner.html">keywordCleaner</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#.keywordCleanUp">keywordCleanUp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#.keywordItemAppend">keywordItemAppend</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#~keyword_item_delete">keyword_item_delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-keywordCleaner.html#~lineCtrl">lineCtrl</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-listGenerator.html">listGenerator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#.listGenerator">listGenerator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~lineList">lineList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~lineListChange">lineListChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~nodeList">nodeList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-listGenerator.html#~nodeListChange">nodeListChange</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-MainSetting.html">MainSetting</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#.event_setOption_function">event_setOption_function</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#.keywordFliter">keywordFliter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#.lineColorChanger">lineColorChanger</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~edgeFilter">edgeFilter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~keyword_search">keyword_search</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~max_Level">max_Level</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~resetChart">resetChart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MainSetting.html#~viewDataChange">viewDataChange</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-searchFunction.html">searchFunction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#.changeMaxlevel">changeMaxlevel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#.searchKeyword">searchKeyword</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~andSearch">andSearch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~andSearchNoRoute">andSearchNoRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~data_filter">data_filter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~dataAppendOr">dataAppendOr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~floodingSearch">floodingSearch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-searchFunction.html#~lineOr">lineOr</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-sliderbarSetting.html">sliderbarSetting</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#.positionCalculator">positionCalculator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#.silderInit">silderInit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#.sliderBar">sliderBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~centrality">centrality</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~filterControler">filterControler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~ngraph">ngraph</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sliderbarSetting.html#~switchType">switchType</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">listGenerator.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module listGenerator
 * @description 產生節點與線段相關列表的模組
 * @author Wei-Jie Li
 * @createDate 2021-03-21
 */
import { colorPanelInit } from './colorPanelSetting';
import { keywordFliter } from './mainSetting';
import { keywordItemAppend, keywords } from './keywordCleaner.js';
/**
 * 圖例列表控制函式
 * @param {*} option - ECharts graph圖表設定檔{@link option}
 * @param {array} route - and的搜尋的路徑(現已沒用到)
 */
export function listGenerator(option, route) {
	nodeList(option.series[0].nodes, route);
	lineList(option.series[0].categories, route);
}
/**
 *節點列表生產函式 
 * @param {object} dataset - 畫面上的節點資料
 * @param {array} route  - and的搜尋的路徑(現已沒用到)
 */
function nodeList(dataset, route) {
	$('.current_node').html(`顯示的點 : (${dataset.length})`);
	$('.nodeSelected').children().remove();
	var index = 0;
	for (const name of groupName) {
		const details = document.createElement('details');
		var summary = document.createElement('summary');
		summary.appendChild(document.createTextNode(name));
		var colorLump = document.createElement('button');
		colorLump.className = 'color-lump';
		colorLump.role = 'button';
		colorLump.name = index;
		colorLump.value = colorLump.style.backgroundColor = userColors[index];
		colorLump.id = 'node';
		summary.appendChild(colorLump);
		details.appendChild(summary);
		details.className = `nodeList${index}`;
		$('.nodeSelected').append(details);
		dataset.forEach((item) => {
			if (item.gp === index) {
				var lableName = item.name;
				var disabled = '';
				if (route !== undefined &amp;&amp; route.length !== 0) {
					var routeCount = 0;
					route.forEach((element) => {
						if (element.includes(item.name)) routeCount++;
					});
					if (route.length === routeCount) lableName = `${item.name} (必要)`;
				}
				if (keywords.includes(item.name)) disabled = `disabled="disabled"`;
				$(`.nodeList${index}`).append(`&lt;div class="nodeSelected_item" value="${item.name}">
             &lt;label>&lt;font color="${item.itemStyle
					.color}">&lt;input type="checkbox" id="${item.name}" name="node_list" value="${item.name}" ${disabled}  checked >${lableName}&lt;/front>&lt;/label>
             &lt;div class="color-lump" style="background-color:${item.itemStyle.color}">&lt;/div>&lt;/div>`);
			}
		});
		index++;
	}

	$('.nodeSelected').scrollTop(function() {
		return this.scrollHeight;
	});
	document.querySelector('.nodeSelected').onchange = function(e) {
		nodeListChange(e);
	};
}
/**
 * 線斷列表生產函式 
 * @param {object} dataset - 畫面上的線段資料
 * @param {array} route  - and的搜尋的路徑(現已沒用到)
 */
function lineList(dataset, route) {
	let mustLine = [];
	$('.current_relation').html(`顯示的線 : (${dataset.length})`);
	$('.lineSelected').children().remove();
	let list = [];
	if (route !== undefined &amp;&amp; route.length !== 0) {
		for (let index = 1; index &lt; route.length; index++) {
			mustLine = mustLine.filter(function(element, index, arr) {
				return arr.indexOf(element) !== index;
			});
		}
	}
	dataset.forEach((item) => {
		if (item.value === 0) {
			if (!list.includes('無共現')) {
				list.push('無共現');
				$('.lineSelected').append(`&lt;div class="lineSelected_item" data-item="無共現">
            &lt;label>&lt;font color="gray">&lt;input type="checkbox" name="node_list" value="無共現" checked>無共現(0)&lt;/front>&lt;/label>&lt;/div>&lt;div class="color-lump" style="background-color:"gray">&lt;/div>`);
			}
		}
	});
	dataset.forEach((item) => {
		if (!list.includes(item.name)) {
			list.push(item.name);
			var name = item.name;
			if (mustLine.includes(item.name)) {
				name = `${item.name} (必要)`;
			}
			$('.lineSelected').append(`&lt;div class="lineSelected_item" value="${item.name}">
            &lt;label>&lt;font color="${item.lineStyle
				.color}">&lt;input type="checkbox" name="lineList" value="${item.name}" checked>${name}&lt;/front>&lt;/label>&lt;/div>&lt;div classs="${item.name}">&lt;button id='line' class="color-lump" role="button"  name="${item.name}" value="${item
				.lineStyle.color}" style="background-color: ${item.lineStyle.color}">&lt;/button>&lt;/div>`);
		}
	});
	$('.lineSelected').scrollTop(function() {
		return this.scrollHeight;
	});
	document.querySelector('.lineSelected').onchange = function(e) {
		lineListChange(e);
	};
	$('button.color-lump').off('click').click((e) => {
		console.log(e.currentTarget.name);
		console.log(e.currentTarget.value);
		console.log(e.currentTarget.id);
		colorPanelInit(e.currentTarget.name, e.currentTarget.value, e.currentTarget.id);
	});
}
/**
 * 觸發節點列表點擊事件後執行的函式，將會從畫面中去除該元素
 * @param {event} e - 點擊事件資訊
 */
function nodeListChange(e) {
	console.log(e.target.value);
	keywordItemAppend(e.target.value, 'not', 'node');
	keywordFliter();
}
/**
 * 觸發線段列表點擊事件後執行的函式，將會從畫面中去除該關係
 * @param {event} e - 點擊事件資訊 
 */
function lineListChange(e) {
	console.log(e.target.value);
	keywordItemAppend(e.target.value, 'not', 'line');
	keywordFliter();
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Fri Jul 02 2021 02:42:01 GMT+0800 (台北標準時間) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
